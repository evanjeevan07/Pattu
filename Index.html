<!DOCTYPE html>
<html lang="ta">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Thinklator ‑ மாத வட்டி கணிப்பான்</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com/3.3.3"></script> <!-- Updated Tailwind CSS version -->

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Pacifico&family=Mukta+Malar:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <style>
    body {
      font-family: 'Mukta Malar', sans-serif;
    }

    .brand-text {
      font-family: 'Abril Fatface', cursive;
      font-weight: bold;
      font-size: 1.5rem;
      color: white;
      margin-left: -10px;
    }

    /* Original shimmer for the Calculate button */
    .shimmer {
      background: linear-gradient(90deg, #4ade80, #22c55e, #4ade80);
      background-size: 200% 100%;
      animation: shimmer 2s infinite; /* Infinite animation */
      color: #fff;
    }

    @keyframes shimmer { /* Original shimmer animation */
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

     /* New keyframes for download button hover effect */
    @keyframes shimmer-effect-download {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }


    .footer-animate {
      border-top: 2px solid;
      border-image: linear-gradient(to right, #16a34a, #86efac);
      border-image-slice: 1;
    }

    .nav-with-slide {
      position: relative;
      overflow: hidden;
      background-color: #40d777;
    }

    .nav-with-slide::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 150px;
      background-color: #bbf7d1;
      z-index: 0;
      clip-path: polygon(0 0, 90% 0, 65% 100%, 0 100%);
    }

    .brand {
      position: relative;
      z-index: 1;
      display: flex;
      align-items: center;
    }

    .brand img {
      height: 56px;
      margin-left: 10px;
      margin-right: 8px;
    }

    .nav-content {
      position: relative;
      z-index: 1;
      color: white;
    }

    /* --- Receipt CSS Styles Start --- */
    /* Apply Abril Fatface specifically to English text elements */
    .english-font {
        font-family: 'Abril Fatface', cursive;
    }

    #receiptContainerWrapper {
        /* Styles for the container holding the receipt and print button */
        /* Initially hidden */
        display: none; /* Start hidden */
        flex-direction: column;
        align-items: center;
        padding: 20px;
        margin-top: 2rem;
        margin-bottom: 20px;
    }

    .receipt-container {
        background-color: #fff; /* Main container is white */
        border: 1px solid #ccc;
        border-radius: 10px;
        padding: 0 20px;
        max-width: 400px;
        width: 95%;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Shadow like the output box */
        margin-bottom: 20px; /* Space between receipt and button */
        overflow: hidden;
    }

    .green-section-bg {
         background-color: #bbf7d1;
         padding: 10px 20px;
         margin: 0 -20px; /* Extend background to edge of receipt-container */
         /* Apply border radius only to top sections for the top green part */
         /* Bottom green part should have bottom radii */
         border-radius: 0; /* Reset default */
    }

     /* Specific border radius for the top green section */
     .receipt-container > .green-section-bg:first-child {
         border-top-left-radius: 10px;
         border-top-right-radius: 10px;
     }

     /* Specific border radius for the bottom green section */
      .receipt-container > .green-section-bg:last-child {
         border-bottom-left-radius: 10px;
         border-bottom-right-radius: 10px;
     }


    .receipt-header {
        text-align: center;
        margin-bottom: 0;
        padding-bottom: 5px;
    }

    .brand-receipt {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 5px;
    }

    .brand-logo {
        width: 40px;
        height: auto;
        margin-right: 8px;
    }

    .brand-receipt h2 {
        font-size: 1.5em;
        margin: 0;
        color: #29ca64;
        font-family: 'Abril Fatface', cursive;
    }

    .receipt-title {
        font-size: 1em;
        color: #29ca64;
        margin-top: 0;
        margin-bottom: 0;
    }

    .date-time-section {
        text-align: center;
        margin-bottom: 0;
        padding-bottom: 10px;
    }

    .date-time {
        font-size: 0.9em;
        color: #4CAF50;
        margin: 0;
    }

    .dashed-separator {
       border-bottom: 1px dashed #ccc;
       margin: 10px auto 10px auto;
       width: 100%;
    }

    .section {
        margin-bottom: 20px;
        padding-top: 10px;
    }

    .section-title {
        font-size: 1.1em;
        font-weight: bold;
        margin-top: 0;
        margin-bottom: 10px;
        padding-bottom: 5px;
        border-bottom: 1px dashed #ccc;
        color: #2c3440;
    }

    .detail-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
        font-size: 0.95em;
    }

    .detail-row .label {
        color: #2c3440;
    }

     .detail-row .value {
        color: #2c3440;
        text-align: right;
    }

     .final-amount-row-item {
         display: flex;
         justify-content: space-between;
         margin-bottom: 5px;
         font-size: 1.1em;
         font-weight: bold;
         color: #4CAF50;
         padding-top: 10px;
         padding-bottom: 5px;
     }

      .final-amount-row-item .value {
         color: #4CAF50;
      }

    .receipt-footer-content {
        text-align: center;
        font-size: 0.8em;
        color: #29ca64;
    }

     .receipt-footer-content p {
         margin: 3px 0;
     }

     .receipt-footer-content p:last-child {
          font-family: 'Abril Fatface', cursive;
     }

    .download-button {
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #4CAF50; /* Base green background */
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1em;
        overflow: hidden;
        position: relative;
        /* Transition for smoother hover color/background changes if not using animation */
        transition: background-color 0.3s ease;
    }

     /* Apply shimmer animation on hover/active */
    .download-button:hover,
    .download-button:active {
        animation: shimmer-effect-download 1.5s linear infinite; /* Apply animation on hover/active */
        background: linear-gradient(90deg, #bbf7d1, #4ade80, #bbf7d1); /* Use the gradient from the original shimmer */
        background-size: 200% 100%;
        color: #fff; /* Ensure text stays white during animation */
    }
     /* Ensure text stays white when not hovered */
    .download-button:not(:hover):not(:active) {
        color: white;
        /* Reset animation and background-position when not hovered/active */
        animation: none;
        background-position: 0% 0;
        /* Base background-color should be defined */
        background-color: #4CAF50;
    }


    .download-button i {
        margin-right: 8px;
        color: inherit; /* Inherit color from button text */
        font-size: 1em;
    }

  </style>
</head>

<body class="bg-gradient-to-br from-green-50 to-green-100 min-h-screen flex flex-col justify-between text-gray-800">

  <!-- Navigation Bar -->
  <nav class="nav-with-slide text-white py-3 px-6 flex items-center justify-between shadow-md">
    <div class="brand">
      <img src="https://assets.onecompiler.app/3zky9aw9p/43fpymfcg/20250422_195741.png" alt="Thinklator Logo">
   <span class="brand-text font-bold text-white text-xl ml-[127px]" style="font-family: 'Abril Fatface', cursive;">Thinklator</span>
    </div>
    <div class="space-x-4 text-sm sm:text-base nav-content">
      <!-- Navigation links (optional) -->
    </div>
  </nav>

  <!-- Header -->
  <header class="text-center mt-6 select-none">
    <h1 class="text-green-800 font-bold text-xl -mt-5" style="font-family: 'Abril Fatface', cursive;">Your Welcome</h1>
    <p class="text-green-800 font-bold -mt-1">மாத வட்டி கணிப்பான்</p>
  </header>

  <!-- Calculator -->
  <main class="flex justify-center mt-8 px-4">
    <div id="calcCard" class="bg-white p-6 rounded-3xl shadow-md w-full max-w-md space-y-6">
      <!-- Inputs -->
      <div class="space-y-5">
        <div>
          <label for="amount" class="block text-green-700 font-bold">முதலீடு தொகை (₹)</label>
          <input id="amount" type="number"
            class="w-full border-b-2 border-green-500 focus:outline-none p-2 bg-transparent text-green-900"/>
        </div>
        <div>
          <label for="rate" class="block text-green-700 font-bold">மாத வட்டி விகிதம் (%)</label>
          <input id="rate" type="number" step="0.01"
            class="w-full border-b-2 border-green-500 focus:outline-none p-2 bg-transparent text-green-900"/>
        </div>
        <div>
          <label for="months" class="block text-green-700 font-bold">கால அவகாசம் (மாதங்களில்)</label>
          <input id="months" type="number"
            class="w-full border-b-2 border-green-500 focus:outline-none p-2 bg-transparent text-green-900"/>
        </div>
      </div>

      <!-- Button -->
      <button onclick="calculate()" class="shimmer w-full py-3 rounded-xl font-semibold tracking-wide">
        கணக்கிடு
      </button>

      <!-- Results (Original - Numbers and Tamil Words) -->
      <!-- This section will be populated by JavaScript -->
      <div id="resultSection" class="mt-6 space-y-6">
           <!-- Content will be inserted here by calculate() -->
      </div>
    </div>
  </main>

  <!-- Receipt Section (Initially Hidden) - This is the new primary output -->
  <div id="receiptContainerWrapper" class="mt-8 flex flex-col items-center">
    <div class="receipt-container">

        <!-- Top Green Section -->
        <div class="green-section-bg">
            <div class="receipt-header">
                <div class="brand-receipt">
                    <img src="https://assets.onecompiler.app/3zky9aw9p/43fpymfcg/20250422_195741.png" alt="Thinklator Logo" class="brand-logo">
                    <h2 class="english-font">Thinklator</h2>
                </div>
                <p class="receipt-title">வட்டி கணக்கீடு ரசீது</p>
            </div>

            <div class="date-time-section">
                <p class="date-time" id="receiptDateTime">--</p>
            </div>
        </div>
        <div class="dashed-separator"></div>


        <!-- Middle Sections (No green background) -->
        <div class="section">
            <h3 class="section-title">கணக்கீட்டு விவரங்கள்</h3>
            <div class="detail-row">
                <span class="label">முதலீட்டு தொகை:</span>
                <span class="value" id="receiptAmountValue">--</span>
            </div>
            <div class="detail-row">
                <span class="label">மாத வட்டி விகிதம்:</span>
                <span class="value" id="receiptRateValue">--</span>
            </div>
            <div class="detail-row">
                <span class="label">கால அவகாசம்:</span>
                <span class="value" id="receiptMonthsValue">--</span>
            </div>
        </div>
        <div class="dashed-separator"></div>


        <div class="section">
            <h3 class="section-title">முடிவுகள்</h3>
             <div class="detail-row">
                <span class="label">மாதாந்திர வட்டி:</span>
                <span class="value" id="receiptMonthlyInterestValue">--</span>
            </div>
             <div class="detail-row">
                <span class="label">மொத்த வட்டி:</span>
                <span class="value" id="receiptTotalInterestValue">--</span>
            </div>
        </div>
        <div class="dashed-separator"></div>

         <!-- Final Amount Section -->
         <div class="section final-amount-section">
             <div class="final-amount-row-item">
                 <span class="label">இறுதி தொகை:</span>
                 <span class="value" id="receiptTotalAmountValue">--</span>
             </div>
        </div>
        <div class="dashed-separator"></div>

        <!-- Footer Section -->
        <div class="green-section-bg">
             <div class="receipt-footer-content">
                 <p>இந்த ரசீது Thinklator மூலம் உருவாக்கப்பட்டது</p>
                 <p class="english-font">© 2024 Thinklator - உங்கள் நிதி கணக்கீடுகளுக்கான நம்பகமான கருவி</p>
             </div>
        </div>

    </div>

    <!-- Download Button -->
    <button class="download-button w-full max-w-md py-3 rounded-xl font-semibold tracking-wide" id="downloadPdfBtn">
         <!-- Download Icon (Font Awesome) -->
        <i class="fas fa-download"></i>
         PDF ஆக பதிவிறக்கு
    </button>
  </div>

  <!-- Footer -->
  <footer class="bg-green-100 text-green-800 text-center py-3 mt-10 footer-animate">
    <a href="https://evanjeevan07.github.io/Portfolio/" class="text-green-800 hover:underline">Devloped By 𝙴𝚅 𝚂𝙰𝙽𝙹𝙴𝙴𝚅𝙰𝙽</a>
  </footer>

  <!-- html2pdf.js library (includes html2canvas and jsPDF) -->
  <!-- Ensure this script loads correctly -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>


  <!-- JavaScript -->
  <script>
    const U = ["","ஒன்று","இரண்டு","மூன்று","நான்கு","ஐந்து","ஆறு","ஏழு","எட்டு","ஒன்பது"];
    const T = ["","பத்து","இருபது","முப்பது","நாப்பது","ஐம்பது","அறுபது","எழுபது","எண்பது","தொண்ணூறு"];

    function bH(n){
      if(n < 10) return U[n];
      if(n < 20) return ["","பதினொன்று","பனிரெண்டு","பதிமூன்று","பதினான்கு","பதினைந்து",
        "பதினாறு","பதினேழு","பதினெட்டு","பத்தொன்பது"][n - 10] || "பத்து";
      const t = Math.floor(n / 10), u = n % 10;
      return T[t] + (u ? ` ${U[u]}` : "");
    }

    function bT(n){
      const h = Math.floor(n / 100), r = n % 100;
      return (h ? `${U[h]} நூறு${r ? " " : ""}` : "") + (r ? bH(r) : "");
    }

    function taWords(num){
      if (isNaN(num)) return "தவறான பதிவு";
      if (num < 0) return "பூஜ்யத்திற்கும் குறைவானது";
      if (num === 0) return "பூஜ்யம்";

      // Round to 2 decimal places for currency
      const numStr = num.toFixed(2);
      const [integerPart, decimalPart] = numStr.split('.');
      const intNum = parseInt(integerPart, 10);
      const decNum = parseInt(decimalPart, 10);

      const c = Math.floor(intNum / 1e7);
      const l = Math.floor((intNum % 1e7) / 1e5);
      const th = Math.floor((intNum % 1e5) / 1e3);
      const r = intNum % 1e3;
      const arr = [];

      if (c) arr.push(`${bT(c)} கோடி`);
      if (l) arr.push(`${bT(l)} லட்சம்`);
      if (th) arr.push(`${bT(th)} ஆயிரம்`);
      if (r) arr.push(bT(r));

      let result = arr.join(" ");
       if (result && intNum > 0) result += " ரூபாய்"; // Add "ரூபாய்" only if there's an integer part > 0

      if (decNum > 0) {
          const paisaText = bH(decNum);
          if (result && intNum > 0) { // If there was a Rupee part
              result += ` மற்றும் ${paisaText} பைசா`;
          } else if (intNum === 0) { // If only paisa (e.g., 0.50)
              result = `${paisaText} பைசா`;
          } else { // Handle cases like 100.50 - "நூறு ரூபாய் மற்றும் ஐம்பது பைசா"
             result += ` மற்றும் ${paisaText} பைசா`;
          }
      } else if (intNum > 0 && decNum === 0) {
           // If it's an integer amount like 100.00, ensure "ரூபாய்" is added
           if (!result.includes(" ரூபாய்")) {
               result += " ரூபாய்";
           }
       }


        // Ensure 0.00 is "பூஜ்யம்" if the integer part is 0 and decimal part is 0
        if (intNum === 0 && decNum === 0) {
            result = "பூஜ்யம்";
        }


      return result.trim(); // Trim any leading/trailing space
    }


    const amountInput = document.getElementById('amount');
    const rateInput = document.getElementById('rate');
    const monthsInput = document.getElementById('months');
    const resultSection = document.getElementById('resultSection'); // Original results section
    const receiptContainerWrapper = document.getElementById('receiptContainerWrapper'); // Receipt section wrapper
    const receiptContainer = document.querySelector('.receipt-container'); // Receipt container

    // Get receipt element references
    const receiptDateTime = document.getElementById('receiptDateTime');
    const receiptAmountValue = document.getElementById('receiptAmountValue');
    const receiptRateValue = document.getElementById('receiptRateValue');
    const receiptMonthsValue = document.getElementById('receiptMonthsValue');
    const receiptMonthlyInterestValue = document.getElementById('receiptMonthlyInterestValue');
    const receiptTotalInterestValue = document.getElementById('receiptTotalInterestValue');
    const receiptTotalAmountValue = document.getElementById('receiptTotalAmountValue');

    const downloadPdfBtn = document.getElementById('downloadPdfBtn');


    function calculate(){
      const amount = +amountInput.value;
      const rate = +rateInput.value;
      const months = +monthsInput.value;

      // Basic validation
      if (isNaN(amount) || amount < 0 || isNaN(rate) || rate < 0 || isNaN(months) || months <= 0) {
          alert("தயவு செய்து சரியான எண் மதிப்புகளை உள்ளிடவும்!");
          // Hide/clear both output sections if inputs are invalid
          resultSection.innerHTML = ''; // Clear original results div
          receiptContainerWrapper.style.display = 'none'; // Hide receipt section
          return;
      }


      const mi = (amount * rate) / 100; // Monthly Interest
      const ti = mi * months; // Total Interest
      const total = amount + ti; // Total Amount

      const items = [
        { label: "முதலீடு", value: amount },
        { label: "மாதாந்திர வட்டி", value: mi },
        { label: "மொத்த வட்டி", value: ti },
        { label: "மொத்த தொகை", value: total }
      ];

      // --- Update Original Results Section (Numbers and Tamil Words) ---
      const numberSection = items.map(item => `
        <div class="flex justify-between border-b border-green-300 pb-1">
          <span>${item.label}:</span>
          <span class="text-right">₹${item.value.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>
        </div>
      `).join("");

      const tamilSection = items.map(item => `
        <div class="flex justify-between border-b border-green-300 pb-1">
          <span>${item.label}:</span>
          <span class="text-right">${taWords(item.value)}</span>
        </div>
      `).join("");

      // Corrected IDs for number and tamil output boxes
      resultSection.innerHTML = `
        <div id="numberOutputBox" class="bg-green-200 p-4 rounded-xl text-green-900 shadow space-y-3 border border-green-400">
          <div class="text-xl font-bold text-center mb-1 border-b border-green-500 pb-1">எண்கள்</div>
          ${numberSection}
        </div>
        <div id="tamilOutputBox" class="bg-green-200 p-4 rounded-xl text-green-900 shadow space-y-3 border border-green-400">
          <div class="text-xl font-bold text-center mb-1 border-b border-green-500 pb-1">தமிழில்</div>
          ${tamilSection}
        </div>
      `;
       // Ensure the resultSection itself is visible if it wasn't already (Tailwind flex/block usually handles this)
       // resultSection.style.display = 'block'; // Not strictly necessary due to Tailwind defaults and innerHTML

      // --- Update Receipt Section ---
      const now = new Date();
      // Format date and time for the receipt (e.g., "YYYY-MM-DD HH:MM")
      //
